{% extends 'base.html.twig' %}

{% block title %}Weather API{% endblock %}

{% block body %}
    <turbo-frame id='id_meteo' class="container mx-auto p-4">
        <h1 class="text-center font-semibold text-xl py-4">La chaîne Météo</h1>
        {# <p>Quel temps fait-il aujourd'hui à {{weatherData.name}} ?</p>
        <p>{{weatherData.main.temp}} degrés</p>
        <img src="https://openweathermap.org/img/wn/{{ weatherData.weather[0].icon }}@2x.png"/> #}

        <div class="flex flex-col justify-center items-center mb-12">
            <div class="flex justify-around text-center w-full">
                {{ form_start(weatherForm, {'attr': {'class': 'bg-white border-b shadow-2xl rounded-3xl pb-4 w-11/12 sm:max-w-screen-sm mt-8'}}) }}
                <div class="mt-8 md:mt-12 text-left">
                    {{ form_label(weatherForm.city, null,  {"label_attr": {"class": "ml-10 font-bold"}}) }}
                    <div class="mt-3 mx-0 px-8">
                        {{ form_widget(weatherForm.city, {"attr": {"class": "input rounded-lg w-full border-2"}}) }}
                    </div>
                </div>
                {{ form_rest(weatherForm) }}
                <button class="mt-8 bg-purple-500 hover:scale-105 rounded-full text-white text-lg px-4 py-2 mb-4" type="submit">
                    Afficher
                </button>
                {{ form_end(weatherForm) }}
            </div>
            {% if error is not null %}
                <div class="flex flex-col justify-around items-center text-center font-bold bg-white border-b shadow-2xl rounded-3xl pb-4 w-11/12 sm:max-w-screen-sm mt-8">
                    <p class="py-4 text-xl text-red-500">{{ error }}</p>
                </div>
            {% elseif weatherData is not null %}
                <div class="flex flex-col justify-around items-center text-center font-bold bg-white border-b shadow-2xl rounded-3xl pb-4 w-11/12 sm:max-w-screen-sm mt-8">
                    <p class="py-4 text-xl">{{weatherData.name}}</p>
                    <p class="text-lg">{{weatherData.main.temp}} degrés</p>
                    <img src="https://openweathermap.org/img/wn/{{ weatherData.weather[0].icon }}@2x.png" class="w-40 h-40"/>
                </div>
            {% endif %}
            
        </div>
    </turbo-frame>
{% endblock %}