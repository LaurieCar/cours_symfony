{% extends 'base.html.twig' %}

{% block title %}Hello ArticleController!{% endblock %}

{% block body %}
<main class="container mx-auto p-4">
    <h1 class="text-center font-semibold text-xl py-4">Liste des articles</h1>
    <button type="button" class="bg-blue-400 rounded-xl p-3 ml-6 mb-8"><a href="{{ path('app_article_add') }}">Ajouter un article</a></button>
    <section class="flex flex-row flex-wrap justify-around gap-4 my-8">
        {% if articles is null %}
            <h2>Il n'y a pas d'articles en BDD</h2>
        {% else %}
            {% for article in articles %}
            <a href="#" class="block border border-purple-500 p-4 shadow-sm sm:p-6 bg-purple-300 rounded-xl w-80">
                <div class="sm:flex sm:justify-between sm:gap-4 lg:gap-6">
                  <div class="sm:order-last sm:shrink-0">
                    <img
                      alt=""
                      src="{{ asset('images/logo-cat.svg') }}"
                      class="size-16 rounded-full object-cover sm:size-[72px]"
                    />
                  </div>
              
                  <div class="mt-4 sm:mt-0">
                    <h3 class="text-lg font-medium text-pretty text-gray-900">
                      {{ article.title }}
                    </h3>
              
                    <p class="mt-1 text-sm text-gray-700">{{ article.user.firstname}} {{ article.user.lastname }}</p>
              
                    <p class="mt-4 line-clamp-2 text-sm text-pretty text-gray-700">
                      {{ article.content }}
                    </p>
                  </div>
                </div>
              
                <dl class="mt-6 flex gap-4 lg:gap-6">
                  <div class="flex items-center gap-2">
                    <dd class="text-xs text-gray-700">{{ article.createdAt|date("d/m/Y") }}</dd>
                  </div>
                  <div class="flex items-center gap-2 font-bold">
                    {% for category in article.categories %}
                      <dd class="text-xs text-gray-700">{{ category.label }}</dd>
                    {% endfor %}  
                  </div>
                </dl>
              </a>
            {% endfor %}
        {% endif %}
    </section>
</main>
{% endblock %}
